# Deploy To Render (Live URL + Google Sheet Admin View)

## 1) Push this repo to GitHub

```powershell
git add .
git commit -m "Prepare Render deployment"
git push
```

## 2) Create Web Service on Render

1. Open Render Dashboard.
2. New -> Web Service.
3. Select your GitHub repo.
4. Render will auto-detect `render.yaml`.
5. Click Create Web Service.

## 3) Set secret env vars in Render

In Render -> Service -> Environment, fill:

- `GOOGLE_SHEET_ID` = your Google Sheet ID
- `GOOGLE_SERVICE_ACCOUNT_EMAIL` = your service account email
- `GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY` = full private key string

Notes:
- Keep line breaks as `\n` in the key if entering in one line.
- `ADMIN_KEY` is auto-generated by Render from `render.yaml`.

## 4) Google Sheet access (required once)

Share the Google Sheet with your service account email as **Editor**.

## 5) Verify

- App URL: `https://<your-service>.onrender.com`
- Admin data JSON:
  - `https://<your-service>.onrender.com/api/admin/states?key=<ADMIN_KEY>`
- Admin CSV:
  - `https://<your-service>.onrender.com/api/admin/states.csv?key=<ADMIN_KEY>`
- Manual sheet sync:
  - `POST https://<your-service>.onrender.com/api/admin/sync-sheet?key=<ADMIN_KEY>`

## 6) Get ADMIN_KEY value

Render -> Service -> Environment -> `ADMIN_KEY`.
